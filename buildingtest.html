
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel = "stylesheet" type = "text/css" href = "buildingstyle.css" />
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
  </head>

<body>

<div id="chart"></div>
<script>


var width = 1000,
    height = 1000,
    window_width = 20,
    window_height = 30,
    building_width = 5 * window_width + 20*5 + 40,
    building_height = window_height * (Math.ceil(class_size/5)) + 20; //5 windows in each row

var data = d3.json("buildingdata.json", function(error, data) {
    data.forEach(function(d) {
        d.question = +d.question;
        d.classSize = +d.classSize;
        d.hiCo = +d.hiCo;
        d.medCo = +d.medCo;
        d.lowCo = +d.lowCo;
        d.notMentioned = +d.notMentioned;
    });
    console.log(data);
})

var svg = d3.select("#chart").append("svg")
  .attr("width", width)
  .attr("height", height);

var buildings = svg.append("g")
    .attr("class", "building");


    buildings.append("rect")
    .attr("x", 0)
    .attr("y", 0)
    .attr("width", building_width)
    .attr("height", building_height)
    .style("stroke", "black")
    .style("fill", "none");

var windows = buildings.selectAll(".windows")
  .data(d3.range(Math.ceil(class_size/5)*5));

windows.enter() //class total
    .append("rect")
    .style("stroke", "grey")
    .style("fill", "none")
    .attr("x", (d,i) => i%5 * 45 + 20)
    .attr("y", (d,i) => Math.floor(i/10)%10 * 45 + 40)
    .attr("width", window_width)
    .attr("height", window_height);

var hiCo = buildings.selectAll(".hiCo")
    .data(d3.range(12));

hiCo.enter()
    .append("rect")
    .style("fill", "orange")
    .attr("x", (d,i) => i%5 *45 + 20)
    .attr("y", (d,i) => Math.floor(i/10)%10 * 45 + 40)
    .attr("width", window_width)
    .attr("height", window_height);



</script>
</body>
</html>